set(src_SOURCES
        src/chroot.c
        src/handle.c
        src/host.c
        src/kernel.c
        src/response.c
        src/server.c
        src/stage.c
        src/writeconfig.c
        src/endian_convert.c
        src/thread.c
        src/request.c
        src/request_structure.c
        src/http.c
        src/queue.c
        src/gentoo_config.c
        src/user.c
        src/pool.c
        src/server_loop.c
        src/server_handle.c
        src/server_init.c
        src/server_handle.c
        src/crypt.c
        src/http_handle.c
        src/api/dynamic_binary.c
        src/api/request_generate.c
        src/api/request_check.c
        src/api/ssl_wrap.c
        src/worker.c
        )

set(include_HEADERS
        include/autogentoo/autogentoo.h
        include/autogentoo/binpkg.h
        include/autogentoo/chroot.h
        include/autogentoo/crypt.h
        include/autogentoo/handle.h
        include/autogentoo/host.h
        include/autogentoo/kernel.h
        include/autogentoo/response.h
        include/autogentoo/request.h
        include/autogentoo/server.h
        include/autogentoo/stage.h
        include/autogentoo/writeconfig.h
        include/autogentoo/endian_convert.h
        include/autogentoo/thread.h
        include/autogentoo/request_structure.h
        include/autogentoo/http.h
        include/autogentoo/queue.h
        include/autogentoo/gentoo_config.h
        include/autogentoo/user.h
        include/autogentoo/crypt.h
        include/autogentoo/pool.h
        include/autogentoo/query.h
        include/autogentoo/api/dynamic_binary.h
        include/autogentoo/api/request_generate.h
        include/autogentoo/api/request_check.h
        include/autogentoo/api/ssl_wrap.h
        include/autogentoo/worker.h
        )

set(test_SOURCES
        src/tests/test.c
        src/tests/test.h
        )

# HTTP
flex_target(FLEX_HTTP ${CMAKE_SOURCE_DIR}/src/http/ag_http_flex.l
        ${CMAKE_CURRENT_BINARY_DIR}/http/ag_http.flex.c)
bison_target(LANG_HTTP
        ${CMAKE_SOURCE_DIR}/src/http/ag_http_bison.y
        ${CMAKE_CURRENT_BINARY_DIR}/http/ag_http.tab.c)

add_flex_bison_dependency(FLEX_HTTP LANG_HTTP)

set(http_BIN
        ${BISON_LANG_HTTP_OUTPUTS}
        ${FLEX_FLEX_HTTP_OUTPUTS}
        )

set(http_PARSER
        src/http/ag_http_flex.l
        src/http/ag_http_bison.y
        )

set(src_CPORTAGE
        cportage/package.c
        cportage/package.h
        cportage/constants.h
        cportage/portage.c
        cportage/portage.h
        cportage/portage_log.c
        cportage/portage_log.h
        cportage/database.c
        cportage/database.h
        cportage/manifest.c
        cportage/manifest.h
        cportage/compress.c
        cportage/compress.h
        cportage/features.c
        cportage/features.h
        cportage/use.c
        cportage/use.h
        cportage/keywords.c
        cportage/keywords.h
        cportage/atom.c
        cportage/atom.h
        cportage/emerge.c
        cportage/emerge.h
        cportage/cportage_defines.h
        )

set(language_SOURCES
        cportage/language/share.h
        )

set(language_PARSER
        cportage/language/depend_bison.y
        cportage/language/depend_flex.l
        )

flex_target(FLEX_DEPEND ${CMAKE_SOURCE_DIR}/cportage/language/depend_flex.l
        ${CMAKE_CURRENT_BINARY_DIR}/cportage/depend.flex.c)
bison_target(LANG_DEPEND
        ${CMAKE_SOURCE_DIR}/cportage/language/depend_bison.y
        ${CMAKE_CURRENT_BINARY_DIR}/cportage/depend.tab.c)

add_flex_bison_dependency(FLEX_DEPEND LANG_DEPEND)

set(language_BIN
        ${BISON_LANG_DEPEND_OUTPUTS}
        ${FLEX_FLEX_DEPEND_OUTPUTS}
        )